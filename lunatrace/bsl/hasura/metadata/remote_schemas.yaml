- name: custom-backend-schema
  definition:
    url_from_env: REMOTE_SCHEMA_URL
    timeout_seconds: 60
    customization:
      type_names:
        mapping:
          UUID: uuid
          JSON: jsonb
    forward_client_headers: true
  comment: ""
  permissions:
    - role: user
      definition:
        schema: |
          type AuthenticatedRepoCloneUrlOutput {
          	url: String
          }
          scalar JSON
          type Mutation {
          	presignManifestUpload(project_id: UUID!): PresignedUrlResponse
          }
          type PresignedUrlResponse {
          	bucket: String!
          	headers: JSON!
          	key: String!
          	url: String!
          }
          type Query {
          	authenticatedRepoCloneUrl(repoGithubId: Int!): AuthenticatedRepoCloneUrlOutput
          	presignSbomUpload(orgId: UUID!, buildId: UUID!): SbomUploadUrlOutput
          }
          type SbomUploadUrlOutput {
          	error: Boolean!
          	uploadUrl: UploadUrl
          }
          scalar UUID
          type UploadUrl {
          	headers: JSON!
          	url: String!
          }
    - role: cli
      definition:
        schema: |
          scalar JSON
          type Query {
          	presignSbomUpload(orgId: UUID!, buildId: UUID!): SbomUploadUrlOutput
          }
          type SbomUploadUrlOutput {
          	error: Boolean!
          	uploadUrl: UploadUrl
          }
          scalar UUID
          type UploadUrl {
          	headers: JSON!
          	url: String!
          }
