- name: custom-backend-schema
  definition:
    url_from_env: REMOTE_SCHEMA_URL
    timeout_seconds: 60
    customization:
      type_names:
        mapping:
          UUID: uuid
          JSON: jsonb
    forward_client_headers: true
  comment: ""
  permissions:
  - role: user
    definition:
      schema: |-
        schema  { query: Query }

        scalar UUID

        type Query { SBOMURL(buildId: UUID!): String
          fakeQueryToHackHasuraBeingABuggyMess: String
        }
  - role: cli
    definition:
      schema: |-
        schema  { query: Query }

        scalar JSON

        scalar UUID

        type Query { presignSbomUpload(orgId: UUID!, buildId: UUID!): SbomUploadUrlOutput
        }

        type SbomUploadUrlOutput { error: Boolean!
          uploadUrl: UploadUrl
        }

        type UploadUrl { headers: JSON!
          url: String!
        }
