---
title: All Aboard the Log4j Hype Train!
description: Understanding what is important to focus on when fixing Log4j vulnerabilities at your company.
slug: log4j-hype-train
date: 2021-12-28
keywords: [log4shell, log4j, log4j2, rce, java, zero-day, mitigation]
tags: [zero-day, security, data-security, data-breaches, guides]
authors: [chris]
---

<!--
  ~ Copyright by LunaSec (owned by Refinery Labs, Inc)
  ~
  ~ Licensed under the Creative Commons Attribution-ShareAlike 4.0 International
  ~ (the "License"); you may not use this file except in compliance with the
  ~ License. You may obtain a copy of the License at
  ~
  ~ https://creativecommons.org/licenses/by-sa/4.0/legalcode
  ~
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
-->

*TL;DR* - Additional vulnerabilities were found with considerably lower severity, although Internet hype would suggest otherwise.
Continue to patch your systems to _at least_ Log4j `2.16.0` (Java 8) or `2.12.2` (Java 7).

![All aboard the Log4Shell hype train](/img/log4shell-hype-train.png)
_Anyone who hasn't been voluntarily riding this train deserves a much-needed break or should have one soon._

After releasing Log4j `2.16.0`, additional vulnerabilities were [discovered](https://logging.apache.org/log4j/2.x/security.html);
CVE-2021-45105 a Denial of Service (DOS) with 5.9 severity patched in `2.17.0` and CVE-2021-44832 a limited Remote Code
Execution (RCE) with 6.6 severity patched in `2.17.1`.

In this post, we will not be focusing on the technical details of the vulnerabilities patched in `2.17.0` or `2.17.1`.
Instead, we will be addressing the how the attention around the recently released versions can negatively impact ongoing
mitigation efforts.

<!--truncate-->

## Capitalizing on the Panic

Before a CVE was assigned to the RCE discovered in CVE-2021-44832, the Checkmarx security researcher @YNizry released a
tweet [teasing about a "Log4j 2.17.0 RCE"](https://twitter.com/YNizry/status/1475764153373573120). Teams in charge of responding
to these security disclosures with their ear to the ground anxiously await for the latest Log4j version to be released. After the disclosure,
Checkmarx wrote a [blog post](https://web.archive.org/web/20211229212117/https://webcache.googleusercontent.com/search?q=cache%3ADxLkX7am-JsJ%3Ahttps%3A%2F%2Fcheckmarx.com%2Fblog%2Fcve-2021-44832-apache-log4j-2-17-0-arbitrary-code-execution-via-jdbcappender-datasource-element%2F)
with [misleading information](https://twitter.com/GossiTheDog/status/1475962632095993856)
about the severity of this vulnerability. In the section, "Why is it so critical?", they compare their vulnerability to
the original Log4Shell vulnerability, stating:

> As you can see, using a different attack vector, it is still possible to achieve an arbitrary code execution using the default configuration.

With as much attention as there is now on the Log4j project, it can be difficult to truly understand the impact of the
recently disclosed vulnerabilities when they are being compared against the original Log4Shell vulnerability, a perfect 10/10 severity.
The truth is that this vulnerability, while technically an RCE, is incredibly unlikely to be prevalent to anyone's project.
It requires the attacker to have a privileged position, at which point they will probably use another attack vector to further
compromise a system.

Checkmarx has since backpedaled to [update their post](https://checkmarx.com/blog/cve-2021-44832-apache-log4j-2-17-0-arbitrary-code-execution-via-jdbcappender-datasource-element/)
to reflect the highly specific attack scenario in which this vulnerability could exist. @YNizry has also
[apologized on Twitter](https://twitter.com/YNizry/status/1476260039346298891) for the concern that their original tweet
raised in the security community.

Security companies are frothing at the mouth to get their hands on panicking companies who are struggling to effectively
fix these vulnerabilities or confidently assure their board of directors that this is no longer an issue. Stoking the fire
with attention grabbing headlines referring to "yet another remote code execution vulnerability" with no other context
is purely a capitalization on people's fear and confusion around one of the worst vulnerabilities in history.

While we will never discourage
anyone from updating their library version to one that is more secure. It is, however, important to consider the urgency in which to push
for version changes. Urging developers to update for the sake of updating to the latest version costs
social capital with other teams. That is, crying wolf, just like the fable has told us, doesn't build trust.

:::info Simple, Clear Log4Shell Mitigation Guidance
With all the recent Log4j versions being released, it can be quite confusing what guidance to follow to have a fully patched
system. Our [mitigation guide](https://www.lunasec.io/docs/blog/log4j-zero-day-mitigation-guide/) is continually updated to
reflect the most up to date guidance for you and your company to follow.
:::

## The Troubling Timeline for Our Poor On-Calls

To really understand why tweeting about a new RCE in Log4j without any context caused such distress to people, you must
consider the timeline of how this has unfolded. You need not look further than the Log4j [security advisory page](https://logging.apache.org/log4j/2.x/security.html)
to understand just how chaotic the past few weeks have been, but this is also merely a snapshot into the information
which has been shared back and forth across the entire Internet.

![Calendar of Log4Shell events](/img/log4shell-event-calendar.png)

_It has been a busy month for security teams._

### [11/24/21] Log4Shell Vulnerability Reported

The vulnerability was reported privately to the Log4j team by Chen Zhaojun of the Alibaba Cloud Security Team.

### [12/04/21] Pull request created to fix Log4Shell

A public [pull request](https://github.com/apache/logging-log4j2/pull/608) was created to fix the Log4Shell vulnerability.
It is important to note that a CVE has [not been created yet](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) and the vulnerability
is not very widely known about outside this PR.

### [12/10/21] CVE Assigned for Log4Shell

The National Vulnerability Database [assigns the Log4Shell vulnerability](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) the identifier CVE-2021-44228 and is given a severity of 10.0.

### [12/11/21] 2.15.0 Released

[Release of `2.15.0`](https://web.archive.org/web/20211211002105/https://logging.apache.org/log4j/2.x/security.html) to address CVE-2021-44228 - 10.0 (Log4Shell).
Public recommendation by the Log4j team to update to this version to fix the Log4Shell vulnerability.

Security teams have already started to investigate this issue internally as they have been made aware of this issue well before this post from
different social media sites. Plans to address this issue internally are underway for some companies.

### [12/15/21] Version 2.16.0 Released to address CVE-2021-45046 - 3.7

[Release of versions `2.16.0` and `2.12.2` (for Java 7)](https://web.archive.org/web/20211215144725/https://logging.apache.org/log4j/2.x/security.html), 4 days have passed since the release of `2.15.0`.

With a low severity, this is has not been considered important to consider as efforts to update to `2.15.0` are well underway
for most companies and shifting focus on this strategy can lead to confusion. Most likely a number of security teams have pushed
for upgrading to `2.16.0` to fully have themselves covered.

### [12/18/21] CVE-2021-45046 severity changed from 3.7 to 9.0 _and_ Version 2.17.0 Released to address CVE-2021-45105 - 7.5

[Version `2.17.0`](https://web.archive.org/web/20211218070719/https://logging.apache.org/log4j/2.x/security.html) is released to address DOS vulnerability, but more importantly `2.15.0`, the version initially reported
upgrading to in order to prevent the Log4Shell vulnerability, contains an RCE with a `9.0` severity rating.

For those security teams that have been proactive in addressing the Log4Shell vulnerability, they now must ask developers
to instead update to at least `2.16.0` if they wish to prevent a possible RCE. Teams that had started to push for `2.16.0`,
may ask their developers once again to update to `2.17.0` as fear of Keep in mind that it has been a least a week
since initial efforts were made to address this issue.

### [12/28/21] Version 2.17.1 Released to address CVE-2021-44832 - 6.6

[Version `2.17.1`](https://web.archive.org/web/20211228204010/https://logging.apache.org/log4j/2.x/security.html) is released
to address an RCE vulnerability given a very specific circumstance where the attacker is in a
privileged position and can control the logging configuration.

Seeing "RCE" in this vulnerability description can be quite confusing now. The initial Log4Shell vulnerability is an RCE
in probably the last library you would consider to actually contain an RCE. The fix to this was proven by the security
community to still be widely exploitable. The fix to the fix is now once again proven exploitable.

Considering this by itself, one is lead to believe that another significant effort is needed to update systems, more than two weeks after the initial push.
Of course, this is all happening during the holidays when a number of critical employees are possibly getting called in
to work to assess what needs to be done.

For those interested, LiveOverflow has put together a [great video](https://www.youtube.com/watch?v=w2F67LbEtnk) detailing
the history of other Log4j vulnerabilities leading up to Log4Shell and the disconnect between security and software development.

## Fixing Vulnerabilities without the Panic

Unclear messaging, incomplete fixes, and misleading severity have been prevalent through this entire patching process.
Responding to the situation without considering how your own messaging can affect other teams can be more damaging than helpful.

Having worked on security teams for large companies, we understand how important clear concise guidance is when executing
a plan for mitigation. Changing what version of Log4j to update to mid-execution is a very costly process as it could leave
some services, which were updated initially to address Log4Shell, now out of date with the latest recommendation.

## Shameless Plug

I have written about how security companies have been jumping at opportunities to make money in this time of panic, and the
truth is so are we. There is, however, an important distinction to be made. LunaSec isn't a tool which just surfaces
vulnerabilities and leaves it up to developers to decipher an alert like: "CVE-2021-44832 was found in your code, fix it now!".
We know from experience this simply doesn't work.

Instead, our product, LunaSec, mitigates a vulnerability before anyone even knows of its existence.

We want the team in charge of responding to security incidents to walk into any meeting or write any email and confidently
say that "because our data is protected by LunaSec, a full compromise is not likely, and we have time to address the root
cause".

We expect you to be skeptical of any claim we may make, and for that reason that is why our code is fully open source.
Take a look at our [documentation](https://www.lunasec.io/docs/pages/overview/introduction), have an engineer review our
[code](https://github.com/lunasec-io/lunasec), prove to yourself that we are not an offering which is all smoke and mirrors.
We have worked with security vendors who have underwhelmed us with their deliverables time and
time again and LunaSec is our attempt to provide a meaningful solution to companies that they can trust.

### Stay in the loop
import ContactForm from '../src/components/ContactForm.jsx'

<ContactForm/>
